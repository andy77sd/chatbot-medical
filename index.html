<!DOCTYPE html>
<html>
<head>
  <title>Asistent Medical AI</title>
  <style>
    body { font-family: Arial, sans-serif; }
    #chatbox { width: 300px; height: 400px; border: 1px solid #ccc; padding: 10px; overflow-y: scroll; }
    #userInput { width: 240px; }
    #sendBtn { width: 50px; }
    .message { margin: 5px 0; }
    .user { color: blue; }
    .bot { color: green; }
  </style>
</head>
<body>

<div id="chatbox"></div>
<input type="text" id="userInput" placeholder="Scrie mesaj..." />
<button id="sendBtn">Trimite</button>

<script>
  const chatbox = document.getElementById('chatbox');
  const userInput = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');

  async function sendMessage() {
    const message = userInput.value.trim();
    if (!message) return;
    
    appendMessage('user', message);
    userInput.value = '';

    try {
      const response = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer sk-proj-jsxp8krvrLsRveu9Pf9xT3BlbkFJVvQiF3CTjIA7aN2wc9mO'
        },
        body: JSON.stringify({
          model: 'gpt-4o-mini',
          messages: [
            {
              role: "system",
              content: "Ești un asistent medical virtual prietenos și empatic. Oferi sfaturi și recomandări pentru afecțiuni ușoare și moderate care nu necesită spitalizare sau urgențe. Recomanzi suplimente și tratamente naturale, dar încurajezi utilizatorii să consulte medicul dacă simptomele se agravează."
            },
            {
              role: "user",
              content: message
            }
          ]
        })
      });
      const data = await response.json();
      const botReply = data.choices[0].message.content;
      appendMessage('bot', botReply);
    } catch (error) {
      appendMessage('bot', 'Eroare la conexiune.');
    }
  }

  function appendMessage(sender, text) {
    const div = document.createElement('div');
    div.classList.add('message', sender);
    div.textContent = (sender === 'user' ? 'Tu: ' : 'Bot: ') + text;
    chatbox.appendChild(div);
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  sendBtn.onclick = sendMessage;
  userInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') sendMessage();
  });
</script>

</body>
</html>
